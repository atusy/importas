<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Define Aliases of Packages Like Python's Import As • importas</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Define Aliases of Packages Like Python's Import As">
<meta property="og:description" content="
    Get objects from packages via aliases of packages and the $ operator.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">importas</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/atusy/importas">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="importas" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#importas" class="anchor"></a>importas</h1></div>
<!-- badges: start -->

<p>Get objects from packages via aliases of packages and the $ operator. The <code><a href="reference/importas.html">%as%</a></code> infix operator works in the way similar to Python’s <code>Import spam as ham</code></p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>remotes<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/remotes/man/install_github.html">install_github</a></span>(<span class="st">"atusy/pkgas"</span>)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(importas)</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># Define an alias of a package, </span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># and access the object from the package via the alias</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>graphics <span class="op">%as%</span><span class="st"> </span>gr</span>
<span id="cb2-6"><a href="#cb2-6"></a>gr<span class="op">$</span>plot</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; function (x, y, ...) </span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; UseMethod("plot")</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; &lt;bytecode: 0x55e46e4adfb0&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="co">#&gt; &lt;environment: namespace:graphics&gt;</span></span>
<span id="cb2-11"><a href="#cb2-11"></a></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co"># Define aliases at once</span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="kw"><a href="reference/importas.html">importas</a></span>(<span class="dt">ut =</span> utils, <span class="dt">st =</span> stats)</span>
<span id="cb2-14"><a href="#cb2-14"></a>ut<span class="op">$</span>data</span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; function (..., list = character(), package = NULL, lib.loc = NULL, </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt;     verbose = getOption("verbose"), envir = .GlobalEnv, overwrite = TRUE) </span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; {</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="co">#&gt;     fileExt &lt;- function(x) {</span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="co">#&gt;         db &lt;- grepl("\\.[^.]+\\.(gz|bz2|xz)$", x)</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="co">#&gt;         ans &lt;- sub(".*\\.", "", x)</span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="co">#&gt;         ans[db] &lt;- sub(".*\\.([^.]+\\.)(gz|bz2|xz)$", "\\1\\2", </span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="co">#&gt;             x[db])</span></span>
<span id="cb2-23"><a href="#cb2-23"></a><span class="co">#&gt;         ans</span></span>
<span id="cb2-24"><a href="#cb2-24"></a><span class="co">#&gt;     }</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="co">#&gt;     names &lt;- c(as.character(substitute(list(...))[-1L]), list)</span></span>
<span id="cb2-26"><a href="#cb2-26"></a><span class="co">#&gt;     if (!is.null(package)) {</span></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="co">#&gt;         if (!is.character(package)) </span></span>
<span id="cb2-28"><a href="#cb2-28"></a><span class="co">#&gt;             stop("'package' must be a character string or NULL")</span></span>
<span id="cb2-29"><a href="#cb2-29"></a><span class="co">#&gt;         if (any(package %in% "base")) </span></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="co">#&gt;             warning("datasets have been moved from package 'base' to package 'datasets'")</span></span>
<span id="cb2-31"><a href="#cb2-31"></a><span class="co">#&gt;         if (any(package %in% "stats")) </span></span>
<span id="cb2-32"><a href="#cb2-32"></a><span class="co">#&gt;             warning("datasets have been moved from package 'stats' to package 'datasets'")</span></span>
<span id="cb2-33"><a href="#cb2-33"></a><span class="co">#&gt;         package[package %in% c("base", "stats")] &lt;- "datasets"</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="co">#&gt;     }</span></span>
<span id="cb2-35"><a href="#cb2-35"></a><span class="co">#&gt;     paths &lt;- find.package(package, lib.loc, verbose = verbose)</span></span>
<span id="cb2-36"><a href="#cb2-36"></a><span class="co">#&gt;     if (is.null(lib.loc)) </span></span>
<span id="cb2-37"><a href="#cb2-37"></a><span class="co">#&gt;         paths &lt;- c(path.package(package, TRUE), if (!length(package)) getwd(), </span></span>
<span id="cb2-38"><a href="#cb2-38"></a><span class="co">#&gt;             paths)</span></span>
<span id="cb2-39"><a href="#cb2-39"></a><span class="co">#&gt;     paths &lt;- unique(normalizePath(paths[file.exists(paths)]))</span></span>
<span id="cb2-40"><a href="#cb2-40"></a><span class="co">#&gt;     paths &lt;- paths[dir.exists(file.path(paths, "data"))]</span></span>
<span id="cb2-41"><a href="#cb2-41"></a><span class="co">#&gt;     dataExts &lt;- tools:::.make_file_exts("data")</span></span>
<span id="cb2-42"><a href="#cb2-42"></a><span class="co">#&gt;     if (length(names) == 0L) {</span></span>
<span id="cb2-43"><a href="#cb2-43"></a><span class="co">#&gt;         db &lt;- matrix(character(), nrow = 0L, ncol = 4L)</span></span>
<span id="cb2-44"><a href="#cb2-44"></a><span class="co">#&gt;         for (path in paths) {</span></span>
<span id="cb2-45"><a href="#cb2-45"></a><span class="co">#&gt;             entries &lt;- NULL</span></span>
<span id="cb2-46"><a href="#cb2-46"></a><span class="co">#&gt;             packageName &lt;- if (file_test("-f", file.path(path, </span></span>
<span id="cb2-47"><a href="#cb2-47"></a><span class="co">#&gt;                 "DESCRIPTION"))) </span></span>
<span id="cb2-48"><a href="#cb2-48"></a><span class="co">#&gt;                 basename(path)</span></span>
<span id="cb2-49"><a href="#cb2-49"></a><span class="co">#&gt;             else "."</span></span>
<span id="cb2-50"><a href="#cb2-50"></a><span class="co">#&gt;             if (file_test("-f", INDEX &lt;- file.path(path, "Meta", </span></span>
<span id="cb2-51"><a href="#cb2-51"></a><span class="co">#&gt;                 "data.rds"))) {</span></span>
<span id="cb2-52"><a href="#cb2-52"></a><span class="co">#&gt;                 entries &lt;- readRDS(INDEX)</span></span>
<span id="cb2-53"><a href="#cb2-53"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-54"><a href="#cb2-54"></a><span class="co">#&gt;             else {</span></span>
<span id="cb2-55"><a href="#cb2-55"></a><span class="co">#&gt;                 dataDir &lt;- file.path(path, "data")</span></span>
<span id="cb2-56"><a href="#cb2-56"></a><span class="co">#&gt;                 entries &lt;- tools::list_files_with_type(dataDir, </span></span>
<span id="cb2-57"><a href="#cb2-57"></a><span class="co">#&gt;                   "data")</span></span>
<span id="cb2-58"><a href="#cb2-58"></a><span class="co">#&gt;                 if (length(entries)) {</span></span>
<span id="cb2-59"><a href="#cb2-59"></a><span class="co">#&gt;                   entries &lt;- unique(tools::file_path_sans_ext(basename(entries)))</span></span>
<span id="cb2-60"><a href="#cb2-60"></a><span class="co">#&gt;                   entries &lt;- cbind(entries, "")</span></span>
<span id="cb2-61"><a href="#cb2-61"></a><span class="co">#&gt;                 }</span></span>
<span id="cb2-62"><a href="#cb2-62"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-63"><a href="#cb2-63"></a><span class="co">#&gt;             if (NROW(entries)) {</span></span>
<span id="cb2-64"><a href="#cb2-64"></a><span class="co">#&gt;                 if (is.matrix(entries) &amp;&amp; ncol(entries) == 2L) </span></span>
<span id="cb2-65"><a href="#cb2-65"></a><span class="co">#&gt;                   db &lt;- rbind(db, cbind(packageName, dirname(path), </span></span>
<span id="cb2-66"><a href="#cb2-66"></a><span class="co">#&gt;                     entries))</span></span>
<span id="cb2-67"><a href="#cb2-67"></a><span class="co">#&gt;                 else warning(gettextf("data index for package %s is invalid and will be ignored", </span></span>
<span id="cb2-68"><a href="#cb2-68"></a><span class="co">#&gt;                   sQuote(packageName)), domain = NA, call. = FALSE)</span></span>
<span id="cb2-69"><a href="#cb2-69"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-70"><a href="#cb2-70"></a><span class="co">#&gt;         }</span></span>
<span id="cb2-71"><a href="#cb2-71"></a><span class="co">#&gt;         colnames(db) &lt;- c("Package", "LibPath", "Item", "Title")</span></span>
<span id="cb2-72"><a href="#cb2-72"></a><span class="co">#&gt;         footer &lt;- if (missing(package)) </span></span>
<span id="cb2-73"><a href="#cb2-73"></a><span class="co">#&gt;             paste0("Use ", sQuote(paste("data(package =", ".packages(all.available = TRUE))")), </span></span>
<span id="cb2-74"><a href="#cb2-74"></a><span class="co">#&gt;                 "\n", "to list the data sets in all *available* packages.")</span></span>
<span id="cb2-75"><a href="#cb2-75"></a><span class="co">#&gt;         else NULL</span></span>
<span id="cb2-76"><a href="#cb2-76"></a><span class="co">#&gt;         y &lt;- list(title = "Data sets", header = NULL, results = db, </span></span>
<span id="cb2-77"><a href="#cb2-77"></a><span class="co">#&gt;             footer = footer)</span></span>
<span id="cb2-78"><a href="#cb2-78"></a><span class="co">#&gt;         class(y) &lt;- "packageIQR"</span></span>
<span id="cb2-79"><a href="#cb2-79"></a><span class="co">#&gt;         return(y)</span></span>
<span id="cb2-80"><a href="#cb2-80"></a><span class="co">#&gt;     }</span></span>
<span id="cb2-81"><a href="#cb2-81"></a><span class="co">#&gt;     paths &lt;- file.path(paths, "data")</span></span>
<span id="cb2-82"><a href="#cb2-82"></a><span class="co">#&gt;     for (name in names) {</span></span>
<span id="cb2-83"><a href="#cb2-83"></a><span class="co">#&gt;         found &lt;- FALSE</span></span>
<span id="cb2-84"><a href="#cb2-84"></a><span class="co">#&gt;         for (p in paths) {</span></span>
<span id="cb2-85"><a href="#cb2-85"></a><span class="co">#&gt;             tmp_env &lt;- if (overwrite) </span></span>
<span id="cb2-86"><a href="#cb2-86"></a><span class="co">#&gt;                 envir</span></span>
<span id="cb2-87"><a href="#cb2-87"></a><span class="co">#&gt;             else new.env()</span></span>
<span id="cb2-88"><a href="#cb2-88"></a><span class="co">#&gt;             if (file_test("-f", file.path(p, "Rdata.rds"))) {</span></span>
<span id="cb2-89"><a href="#cb2-89"></a><span class="co">#&gt;                 rds &lt;- readRDS(file.path(p, "Rdata.rds"))</span></span>
<span id="cb2-90"><a href="#cb2-90"></a><span class="co">#&gt;                 if (name %in% names(rds)) {</span></span>
<span id="cb2-91"><a href="#cb2-91"></a><span class="co">#&gt;                   found &lt;- TRUE</span></span>
<span id="cb2-92"><a href="#cb2-92"></a><span class="co">#&gt;                   if (verbose) </span></span>
<span id="cb2-93"><a href="#cb2-93"></a><span class="co">#&gt;                     message(sprintf("name=%s:\t found in Rdata.rds", </span></span>
<span id="cb2-94"><a href="#cb2-94"></a><span class="co">#&gt;                       name), domain = NA)</span></span>
<span id="cb2-95"><a href="#cb2-95"></a><span class="co">#&gt;                   thispkg &lt;- sub(".*/([^/]*)/data$", "\\1", p)</span></span>
<span id="cb2-96"><a href="#cb2-96"></a><span class="co">#&gt;                   thispkg &lt;- sub("_.*$", "", thispkg)</span></span>
<span id="cb2-97"><a href="#cb2-97"></a><span class="co">#&gt;                   thispkg &lt;- paste0("package:", thispkg)</span></span>
<span id="cb2-98"><a href="#cb2-98"></a><span class="co">#&gt;                   objs &lt;- rds[[name]]</span></span>
<span id="cb2-99"><a href="#cb2-99"></a><span class="co">#&gt;                   lazyLoad(file.path(p, "Rdata"), envir = tmp_env, </span></span>
<span id="cb2-100"><a href="#cb2-100"></a><span class="co">#&gt;                     filter = function(x) x %in% objs)</span></span>
<span id="cb2-101"><a href="#cb2-101"></a><span class="co">#&gt;                   break</span></span>
<span id="cb2-102"><a href="#cb2-102"></a><span class="co">#&gt;                 }</span></span>
<span id="cb2-103"><a href="#cb2-103"></a><span class="co">#&gt;                 else if (verbose) </span></span>
<span id="cb2-104"><a href="#cb2-104"></a><span class="co">#&gt;                   message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n", </span></span>
<span id="cb2-105"><a href="#cb2-105"></a><span class="co">#&gt;                     name, paste(names(rds), collapse = ",")), </span></span>
<span id="cb2-106"><a href="#cb2-106"></a><span class="co">#&gt;                     domain = NA)</span></span>
<span id="cb2-107"><a href="#cb2-107"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-108"><a href="#cb2-108"></a><span class="co">#&gt;             if (file_test("-f", file.path(p, "Rdata.zip"))) {</span></span>
<span id="cb2-109"><a href="#cb2-109"></a><span class="co">#&gt;                 warning("zipped data found for package ", sQuote(basename(dirname(p))), </span></span>
<span id="cb2-110"><a href="#cb2-110"></a><span class="co">#&gt;                   ".\nThat is defunct, so please re-install the package.", </span></span>
<span id="cb2-111"><a href="#cb2-111"></a><span class="co">#&gt;                   domain = NA)</span></span>
<span id="cb2-112"><a href="#cb2-112"></a><span class="co">#&gt;                 if (file_test("-f", fp &lt;- file.path(p, "filelist"))) </span></span>
<span id="cb2-113"><a href="#cb2-113"></a><span class="co">#&gt;                   files &lt;- file.path(p, scan(fp, what = "", quiet = TRUE))</span></span>
<span id="cb2-114"><a href="#cb2-114"></a><span class="co">#&gt;                 else {</span></span>
<span id="cb2-115"><a href="#cb2-115"></a><span class="co">#&gt;                   warning(gettextf("file 'filelist' is missing for directory %s", </span></span>
<span id="cb2-116"><a href="#cb2-116"></a><span class="co">#&gt;                     sQuote(p)), domain = NA)</span></span>
<span id="cb2-117"><a href="#cb2-117"></a><span class="co">#&gt;                   next</span></span>
<span id="cb2-118"><a href="#cb2-118"></a><span class="co">#&gt;                 }</span></span>
<span id="cb2-119"><a href="#cb2-119"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-120"><a href="#cb2-120"></a><span class="co">#&gt;             else {</span></span>
<span id="cb2-121"><a href="#cb2-121"></a><span class="co">#&gt;                 files &lt;- list.files(p, full.names = TRUE)</span></span>
<span id="cb2-122"><a href="#cb2-122"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-123"><a href="#cb2-123"></a><span class="co">#&gt;             files &lt;- files[grep(name, files, fixed = TRUE)]</span></span>
<span id="cb2-124"><a href="#cb2-124"></a><span class="co">#&gt;             if (length(files) &gt; 1L) {</span></span>
<span id="cb2-125"><a href="#cb2-125"></a><span class="co">#&gt;                 o &lt;- match(fileExt(files), dataExts, nomatch = 100L)</span></span>
<span id="cb2-126"><a href="#cb2-126"></a><span class="co">#&gt;                 paths0 &lt;- dirname(files)</span></span>
<span id="cb2-127"><a href="#cb2-127"></a><span class="co">#&gt;                 paths0 &lt;- factor(paths0, levels = unique(paths0))</span></span>
<span id="cb2-128"><a href="#cb2-128"></a><span class="co">#&gt;                 files &lt;- files[order(paths0, o)]</span></span>
<span id="cb2-129"><a href="#cb2-129"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-130"><a href="#cb2-130"></a><span class="co">#&gt;             if (length(files)) {</span></span>
<span id="cb2-131"><a href="#cb2-131"></a><span class="co">#&gt;                 for (file in files) {</span></span>
<span id="cb2-132"><a href="#cb2-132"></a><span class="co">#&gt;                   if (verbose) </span></span>
<span id="cb2-133"><a href="#cb2-133"></a><span class="co">#&gt;                     message("name=", name, ":\t file= ...", .Platform$file.sep, </span></span>
<span id="cb2-134"><a href="#cb2-134"></a><span class="co">#&gt;                       basename(file), "::\t", appendLF = FALSE, </span></span>
<span id="cb2-135"><a href="#cb2-135"></a><span class="co">#&gt;                       domain = NA)</span></span>
<span id="cb2-136"><a href="#cb2-136"></a><span class="co">#&gt;                   ext &lt;- fileExt(file)</span></span>
<span id="cb2-137"><a href="#cb2-137"></a><span class="co">#&gt;                   if (basename(file) != paste0(name, ".", ext)) </span></span>
<span id="cb2-138"><a href="#cb2-138"></a><span class="co">#&gt;                     found &lt;- FALSE</span></span>
<span id="cb2-139"><a href="#cb2-139"></a><span class="co">#&gt;                   else {</span></span>
<span id="cb2-140"><a href="#cb2-140"></a><span class="co">#&gt;                     found &lt;- TRUE</span></span>
<span id="cb2-141"><a href="#cb2-141"></a><span class="co">#&gt;                     zfile &lt;- file</span></span>
<span id="cb2-142"><a href="#cb2-142"></a><span class="co">#&gt;                     zipname &lt;- file.path(dirname(file), "Rdata.zip")</span></span>
<span id="cb2-143"><a href="#cb2-143"></a><span class="co">#&gt;                     if (file.exists(zipname)) {</span></span>
<span id="cb2-144"><a href="#cb2-144"></a><span class="co">#&gt;                       Rdatadir &lt;- tempfile("Rdata")</span></span>
<span id="cb2-145"><a href="#cb2-145"></a><span class="co">#&gt;                       dir.create(Rdatadir, showWarnings = FALSE)</span></span>
<span id="cb2-146"><a href="#cb2-146"></a><span class="co">#&gt;                       topic &lt;- basename(file)</span></span>
<span id="cb2-147"><a href="#cb2-147"></a><span class="co">#&gt;                       rc &lt;- .External(C_unzip, zipname, topic, </span></span>
<span id="cb2-148"><a href="#cb2-148"></a><span class="co">#&gt;                         Rdatadir, FALSE, TRUE, FALSE, FALSE)</span></span>
<span id="cb2-149"><a href="#cb2-149"></a><span class="co">#&gt;                       if (rc == 0L) </span></span>
<span id="cb2-150"><a href="#cb2-150"></a><span class="co">#&gt;                         zfile &lt;- file.path(Rdatadir, topic)</span></span>
<span id="cb2-151"><a href="#cb2-151"></a><span class="co">#&gt;                     }</span></span>
<span id="cb2-152"><a href="#cb2-152"></a><span class="co">#&gt;                     if (zfile != file) </span></span>
<span id="cb2-153"><a href="#cb2-153"></a><span class="co">#&gt;                       on.exit(unlink(zfile))</span></span>
<span id="cb2-154"><a href="#cb2-154"></a><span class="co">#&gt;                     switch(ext, R = , r = {</span></span>
<span id="cb2-155"><a href="#cb2-155"></a><span class="co">#&gt;                       library("utils")</span></span>
<span id="cb2-156"><a href="#cb2-156"></a><span class="co">#&gt;                       sys.source(zfile, chdir = TRUE, envir = tmp_env)</span></span>
<span id="cb2-157"><a href="#cb2-157"></a><span class="co">#&gt;                     }, RData = , rdata = , rda = load(zfile, </span></span>
<span id="cb2-158"><a href="#cb2-158"></a><span class="co">#&gt;                       envir = tmp_env), TXT = , txt = , tab = , </span></span>
<span id="cb2-159"><a href="#cb2-159"></a><span class="co">#&gt;                       tab.gz = , tab.bz2 = , tab.xz = , txt.gz = , </span></span>
<span id="cb2-160"><a href="#cb2-160"></a><span class="co">#&gt;                       txt.bz2 = , txt.xz = assign(name, read.table(zfile, </span></span>
<span id="cb2-161"><a href="#cb2-161"></a><span class="co">#&gt;                         header = TRUE, as.is = FALSE), envir = tmp_env), </span></span>
<span id="cb2-162"><a href="#cb2-162"></a><span class="co">#&gt;                       CSV = , csv = , csv.gz = , csv.bz2 = , </span></span>
<span id="cb2-163"><a href="#cb2-163"></a><span class="co">#&gt;                       csv.xz = assign(name, read.table(zfile, </span></span>
<span id="cb2-164"><a href="#cb2-164"></a><span class="co">#&gt;                         header = TRUE, sep = ";", as.is = FALSE), </span></span>
<span id="cb2-165"><a href="#cb2-165"></a><span class="co">#&gt;                         envir = tmp_env), found &lt;- FALSE)</span></span>
<span id="cb2-166"><a href="#cb2-166"></a><span class="co">#&gt;                   }</span></span>
<span id="cb2-167"><a href="#cb2-167"></a><span class="co">#&gt;                   if (found) </span></span>
<span id="cb2-168"><a href="#cb2-168"></a><span class="co">#&gt;                     break</span></span>
<span id="cb2-169"><a href="#cb2-169"></a><span class="co">#&gt;                 }</span></span>
<span id="cb2-170"><a href="#cb2-170"></a><span class="co">#&gt;                 if (verbose) </span></span>
<span id="cb2-171"><a href="#cb2-171"></a><span class="co">#&gt;                   message(if (!found) </span></span>
<span id="cb2-172"><a href="#cb2-172"></a><span class="co">#&gt;                     "*NOT* ", "found", domain = NA)</span></span>
<span id="cb2-173"><a href="#cb2-173"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-174"><a href="#cb2-174"></a><span class="co">#&gt;             if (found) </span></span>
<span id="cb2-175"><a href="#cb2-175"></a><span class="co">#&gt;                 break</span></span>
<span id="cb2-176"><a href="#cb2-176"></a><span class="co">#&gt;         }</span></span>
<span id="cb2-177"><a href="#cb2-177"></a><span class="co">#&gt;         if (!found) {</span></span>
<span id="cb2-178"><a href="#cb2-178"></a><span class="co">#&gt;             warning(gettextf("data set %s not found", sQuote(name)), </span></span>
<span id="cb2-179"><a href="#cb2-179"></a><span class="co">#&gt;                 domain = NA)</span></span>
<span id="cb2-180"><a href="#cb2-180"></a><span class="co">#&gt;         }</span></span>
<span id="cb2-181"><a href="#cb2-181"></a><span class="co">#&gt;         else if (!overwrite) {</span></span>
<span id="cb2-182"><a href="#cb2-182"></a><span class="co">#&gt;             for (o in ls(envir = tmp_env, all.names = TRUE)) {</span></span>
<span id="cb2-183"><a href="#cb2-183"></a><span class="co">#&gt;                 if (exists(o, envir = envir, inherits = FALSE)) </span></span>
<span id="cb2-184"><a href="#cb2-184"></a><span class="co">#&gt;                   warning(gettextf("an object named %s already exists and will not be overwritten", </span></span>
<span id="cb2-185"><a href="#cb2-185"></a><span class="co">#&gt;                     sQuote(o)))</span></span>
<span id="cb2-186"><a href="#cb2-186"></a><span class="co">#&gt;                 else assign(o, get(o, envir = tmp_env, inherits = FALSE), </span></span>
<span id="cb2-187"><a href="#cb2-187"></a><span class="co">#&gt;                   envir = envir)</span></span>
<span id="cb2-188"><a href="#cb2-188"></a><span class="co">#&gt;             }</span></span>
<span id="cb2-189"><a href="#cb2-189"></a><span class="co">#&gt;             rm(tmp_env)</span></span>
<span id="cb2-190"><a href="#cb2-190"></a><span class="co">#&gt;         }</span></span>
<span id="cb2-191"><a href="#cb2-191"></a><span class="co">#&gt;     }</span></span>
<span id="cb2-192"><a href="#cb2-192"></a><span class="co">#&gt;     invisible(names)</span></span>
<span id="cb2-193"><a href="#cb2-193"></a><span class="co">#&gt; }</span></span>
<span id="cb2-194"><a href="#cb2-194"></a><span class="co">#&gt; &lt;bytecode: 0x55e46ed733b0&gt;</span></span>
<span id="cb2-195"><a href="#cb2-195"></a><span class="co">#&gt; &lt;environment: namespace:utils&gt;</span></span>
<span id="cb2-196"><a href="#cb2-196"></a>st<span class="op">$</span>median</span>
<span id="cb2-197"><a href="#cb2-197"></a><span class="co">#&gt; function (x, na.rm = FALSE, ...) </span></span>
<span id="cb2-198"><a href="#cb2-198"></a><span class="co">#&gt; UseMethod("median")</span></span>
<span id="cb2-199"><a href="#cb2-199"></a><span class="co">#&gt; &lt;bytecode: 0x55e46e42ce28&gt;</span></span>
<span id="cb2-200"><a href="#cb2-200"></a><span class="co">#&gt; &lt;environment: namespace:stats&gt;</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/atusy/importas">https://​github.com/​atusy/​importas</a>
</li>
<li>Report a bug at <br><a href="https://github.com/atusy/importas/issues">https://​github.com/​atusy/​importas/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Atsushi Yasumoto <br><small class="roles"> Author, copyright holder, maintainer </small> <a href="https://orcid.org/0000-0002-8335-495X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/atusy/importas"><img src="https://travis-ci.org/atusy/importas.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/atusy/importas"><img src="https://ci.appveyor.com/api/projects/status/github/atusy/importas?branch=master&amp;svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/gh/atusy/importas?branch=master"><img src="https://codecov.io/gh/atusy/importas/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Atsushi Yasumoto.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
